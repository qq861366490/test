<html>
<head>
  <title>js-事件对象（Event）下</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="664"/>
<h1>js-事件对象（Event）下</h1>

<div>
<span><div style="text-align: center"><span style="font-size: 32px;">js-事件对象（Event）下</span></div><div><br/></div><div style="text-align: right"><div style="text-align: right"><span style="font-size: 16px;">作者： 千锋李文浩</span></div></div><div style="text-align: right"><span style="font-size: 16px;">时间：   17/01/24</span></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><span style="font-size: 16px;"><b>事件对象回顾</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、什么是事件对象？</div><div>     </div><div>2、怎么获取事件对象？</div><div>     div.onclick = function(e){</div><div>          e = e || window.event;</div><div>     }</div><div>3、事件对象常用属性</div><div>     e.offsetX</div><div>     e.clientX e.pageX</div><div>     e.screentX</div><div>     </div><div>     e.keyCode || e.which</div><div><br/></div><div>     e.ctrlKey shiftKey altKey</div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><b><span style="font-size: 16px;">浏览器默认行为</span></b></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、右键会出现菜单</div><div><br/></div><div>2、点击超链接会发生跳转跳转</div><div><br/></div><div>3、点击type=&quot;submit&quot;的按钮会提交表单</div><div><br/></div><div>4、图片的拖拽</div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><b><span style="font-size: 16px;">阻止默认行为（重）</span></b></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、return false;(一般不用)</div><div><br/></div><div>2、利用<span style="color: rgb(227, 0, 0);"><b>事件对象属性  preventDefault 和  returnValue</b></span>  (以后均使用此方法)</div><div><br/></div><div>     preventDefault是一个方法，写法：e.preventDefault()  </div><div>     returnVaule的值是一个常量，写法：e.returnValue = false;</div><div>    </div><div>     e.preventDefault ? e.preventDefault() : e.returnValue = false;</div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><b><span style="font-size: 16px;">封装阻止默认行为方法preventDefault()</span></b></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><br/></div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>事件流（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、神奇的现象</div><div><br/></div><div>2、什么是事件流？</div><div>     当一个HTML元素产生一个事件时，该事件会在元素结点与根结点之间的路径传播，路径所经过的结点都会收到该事件，这个传播过程可称为DOM事件流。</div><div><br/></div><div>3、两种事件模型（捕获和冒泡）</div><div>     冒泡事件流：</div><div>          微软提出了名为事件冒泡(event bubbling)的事件流。事件冒泡可以形象地比喻为把一颗石头投入水中，泡泡会一直从水底冒出水面。也就是说，事件会从最内层的元素开始发生，一直向上传播，直到根节点。</div><div>    </div><div>     捕获事件流：</div><div>          网景提出另一种事件流名为事件捕获(event capturing)。与事件冒泡相反，事件会从根节点开始发生，直到最具体的元素。</div><div>          </div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>阻止事件冒泡（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>利用事件对象属性 stopPropagation 和 cancelBubble</div><div>     stopPropagation是一个方法，写法：e.stopPropagation()</div><div>     cancelBubble的值是一个常量，写法：e.cancelBubble = true;</div><div>     </div><div>    function stopPropagation(e){</div><div style="margin-left:40px;">e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;</div><div style="margin-left:40px;">}</div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><b><span style="font-size: 16px;">事件源（重）</span></b></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、什么是事件源？</div><div>     概念：真正触发事件的元素</div><div>     事件对象的一个属性</div><div>     <span style="color: rgb(227, 0, 0);"><b>是一个元素</b></span></div><div><br/></div><div>2、怎么获取事件源？</div><div>     1、先获取事件对象 e</div><div>     2、e.target || e.srcElement</div><div><br/></div><div>3、事件源有什么用？</div><div>     通过事件源可以知道真正触发事件的元素</div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><b><span style="font-size: 16px;">DOM0级事件的缺陷</span></b></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>场景：现有元素div,用属性形式给div添加了两次点击事件，如：</div><div>     div.onclick = function(){</div><div>          alert(1)</div><div>     }</div><div>     div.onclick = function(){</div><div>          alert(2);</div><div>     }</div><div><br/></div><div>     var a = 10;</div><div>     a = 15;</div><div>     a;</div><div><br/></div><div>问：点击div时弹出什么？</div><div><br/></div><div><span style="color: rgb(227, 0, 0);"><b>缺陷：重复定义事件后面的会覆盖前面的</b></span></div></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><b><span style="font-size: 16px;">事件监听器（重）</span></b></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>汉语：添加事件监听，翻译：addEventListener</div><div><br/></div><div>写法：</div><div style="margin-left:40px;"><span style="color: rgb(173, 0, 0);"><b>元素.addEventListener(eventFlag, eventFunc, [bool useCapture=false])</b></span></div><div style="margin-left:80px;">eventFlag : 事件名称，如click、mouseover…</div><div style="margin-left:80px;">eventFunc: 绑定到事件中执行的动作（匿名函数、函数名）</div><div style="margin-left:80px;">useCapture: 指定是否绑定在捕获阶段，true为是，false为否，默认为false</div><div style="margin-left:80px;">在事件监听流中可以使用event.stopPropagation()来阻止事件继续往下流</div><div> </div><div>变态的IE</div><div style="margin-left:40px;"><span style="color: rgb(173, 0, 0);"><b>元素.attachEvent(eventFlag, eventFunc)</b></span></div><div style="margin-left:80px;">eventFlag: <span style="color: rgb(173, 0, 0);"><b>事件名称，但要加上on，如onclick、onmouseover…</b></span></div><div style="margin-left:80px;">eventFunc: 绑定到事件中执行的动作</div><div style="margin-left:80px;">在事件监听流中可以使用window.event.cacenlBubble=false来阻止事件继续往下流</div><div><br/></div><div><br/></div><div>总结：</div><div>     addEventListener，针对ff，chrome，safari浏览器，第三个参数：false指冒泡阶段，true为指捕获阶段。默认false。</div><div><br/></div><div>     attachEvent，针对ie系列、还有opera浏览器，少了事件处理机制的参数，只指定事件类型（别忘了on）和触发哪个函数。</div><div>     </div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><b><span style="font-size: 16px;">封装事件监听器</span></b></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><img src="js-事件对象（Event）下_files/Image.png" type="image/png" style="height:auto;" width="320.42857142857144"/></div></div><div><br/></div><div><br/></div><div><b><span style="font-size: 16px;">案例：学生管理系统</span></b></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><br/></div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><span style="font-size: 16px;"><b>事件委托（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、<span style="color: rgb(227, 0, 0);"><b>利用冒泡机制</b></span>将子元素事件委托给父元素监听</div><div>     1，什么是事件委托：通俗的讲，事件就是onclick，onmouseover，onmouseout，等就是事件，委托呢，就是让别人来做，这个事件本来是加在某些元素上的，然而你却加到别人身上来做，完成这个事件。利用冒泡的原理，把事件加到父级上，触发执行效果。</div><div>     2、好处：</div><div>          给未来元素添加事件（必须使用事件委托）</div><div>          提高性能 （邮件删除，单独绑定删除事件需要绑定30次，效率低）</div><div>          </div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>实战</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、学生管理系统改进</div><div><br/></div><div>2、留言板信息删除</div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><b><span style="font-size: 16px;">checked(补充)</span></b></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>获取复选框的状态：</div><div>     checkbox.checked  true(当前为选中状态)  false(未选中)</div><div>     if(checkbox.checked){}</div><div><br/></div><div>更改复选框的状态</div><div>     checkbox.checked = true;//让复选框选中</div><div>     checkbox.checked = false;//取消选中</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>拖拽（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>0、拖拽场景</div><div>     音乐进度条</div><div>     消息框</div><div>     滑动验证码</div><div>     百度首页背景透明度</div><div>     。。。</div><div><br/></div><div>1、三个事件 (onmousedown / onmousemove / onmouseup) onmousedown </div><div>     鼠标按下 onmousemove </div><div>     鼠标移动 onmouseup      </div><div>     鼠标按键抬起</div><div><br/></div><div>2、拖拽原理</div><div>      1.给目标元素添加onmousedown事件，拖拽的前提是在目标元素按下鼠标左键    </div><div>    </div><div>      2.当onmousedown发生以后，此刻给document添加onmousemove事件，意味着此刻鼠标在网页的移动都将改变目标元素的位置                         </div><div><br/></div><div>      3.在onmousemove事件中，通过事件对象获取鼠标位置，更改元素的left、top值     </div><div><br/></div><div>      4.给document添加onmouseup事件，意味着此刻鼠标在网页的任意位置松开鼠标，都会放弃拖拽的效果 在onmouseup事件中，取消document的onmousemove事件即可。    </div><div>          document.onmousemove = null;</div></div><div><br/></div><div><br/></div><div>实战</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、图片简单拖拽</div><div><br/></div><div>2、消息框的拖拽</div><div><br/></div><div>3、音乐进度条拖拽</div><div><br/></div><div>4、网易账号登录</div><div><br/></div><div>5、淘宝注册</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>JSON对象&amp;构造函数（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>[] {}</div><div><br/></div><div>[</div><div>     {},</div><div>     {},</div><div>     {}</div><div>]</div><div><br/></div><div>xml</div><div>     &lt;students&gt;</div><div>        &lt;person&gt;</div><div>          &lt;name&gt;张三&lt;/name&gt;</div><div>        &lt;/person&gt;  </div><div>     &lt;/students&gt; </div><div><br/></div><div>var students = [</div><div>     {</div><div>         name: '张三',</div><div>         phone: 18200000000</div><div>     },</div><div>     {</div><div>          name: '李四',</div><div>          phone: 18700000000</div><div>     }</div><div>];</div><div><br/></div><div><br/></div><div>//构造函数（类）</div><div><br/></div><div>Array Math Date  </div><div>var arr = new Array()</div><div><br/></div><div>function Dog(){</div><div><br/></div><div>}</div><div><br/></div><div>var dog = new Dog();</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>预习</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、什么是cookie</div><div><br/></div><div>2、怎么存储一个cookie？（比如保存用户名）</div><div><br/></div><div>3、怎么获取cookie？</div><div><br/></div><div>4、怎么删除cookie？</div><div><br/></div><div>5、怎么将数组或者对象存入cookie？</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 