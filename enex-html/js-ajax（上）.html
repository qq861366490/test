<html>
<head>
  <title>js-ajax（上）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="718"/>
<h1>js-ajax（上）</h1>

<div>
<span><div style="display: block; margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-align: center;"><span style="font-size: 32px;">js-ajax（上）</span></div><div style="display: block; margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><br/></div><div style="display: block; margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-align: right;"><div style="display: block; margin: 0px; padding: 0px; text-align: right;"><span style="font-size: 16px;">作者： 千锋李文浩</span></div></div><div style="display: block; margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-align: right;"><div><span style="font-size: 16px;">时间：   17/02/19</span></div></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>同步和异步（扩展）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、什么是异步？</div><div><br/></div><div>     自己执行的时候不会影响其他内容执行   （边泡脚边看电视）</div><div><br/></div><div>2、什么是同步？</div><div><br/></div><div>     自己执行的时候会阻断其他内容的执行   （先洗漱再吃饭）</div><div><br/></div><div><br/></div><div>js代码哪些是同步的？哪些是异步的？</div><div>定时器  事件</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>线程和进程（扩展）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、进程≠程序    </div><div><br/></div><div>2、进程：程序从开始到结束的一次执行过程    </div><div>   线程：一个进程当中，程序同时运行的多个分支，叫做线程</div><div><br/></div><div>3、进程：某一个任务（一个进程可以包含多个线程）      线程：任务里的某个细节</div><div><br/></div><div><br/></div><div>比如：开启电脑后电脑在一直运行，这个过程我们可以成为线程，开启电脑后会启动很多应用程序，启动的应用程序我们可以认为是线程</div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><span style="font-size: 16px;"><b>数据加载的两种方案</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、同步加载</div><div>     </div><div>2、异步加载</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>面试题（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、什么是ajax？</div><div>2、ajax有什么优点（好处）？</div><div>3、你能说说ajax的流程吗（请求数据的过程）？</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>什么是ajax（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>AJAX即“Asynchronous Javascript And XML”（异步JavaScript和XML），是指一种创建交互式网页应用的网页开发技术。    </div><div><br/></div><div>中文名：阿贾克斯</div><div><br/></div><div><span style="color: rgb(227, 0, 0);">AJAX是一种技术，不是语言</span>.    </div><div> </div><div><span style="color: rgb(227, 0, 0);">AJAX是异步通信的（加载数据时页面不刷新）</span>。</div><div><br/></div><div>总结：<span style="color: rgb(173, 0, 0);"><b>ajax是一种通过异步方式请求数据的技术</b></span>。</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>ajax的优点（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、使用Javascript向服务器提出请求并处理响应而不阻塞用户！</div><div>     核心对象XMLHTTPRequest。通过这个对象，您的 JavaScript 可在不重载页面的情况与Web服务器交换数据。    </div><div> </div><div>2、AJAX 在浏览器与 Web 服务器之间使用异步数据传输（HTTP 请求），这样就可使网页从服务器请求少量的信息，而不是整个页面。    </div><div><br/></div><div>3、AJAX 可使因特网应用程序更小、更快，更友好。</div><div><br/></div><div>总结：<span style="color: rgb(173, 0, 0);"><b>在不刷新页面的情况下可以对局部数据进行加载和刷新</b></span>。（页面无刷新加载数据）  局部刷新   局部加载</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>ajax的应用场景</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、注册时判断用户名是否存在</div><div><br/></div><div>2、懒加载</div><div><br/></div><div>3、局部刷新</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>ajax工作原理（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>Ajax通过XMLHttpRequest对象执行操作，其中XMLHttpRequest对象是在浏览器中内置的一个对象。</div><div><br/></div><div>运行原理：相当于创建了一个请求代理，通过代理去完成与服务器的交互，交互的过程中客户不需要等待，还可以进行其它的工作，交互完成以后，代理再将交互的结果返回给客户页面。</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>ajax流程（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、创建通信对象  （下载一个外卖软件）</div><div>     1.1、IE7及其以上版本中支持原生的 XHR 对象，因此可以直接用：  </div><div>          var xhr = new XMLHttpRequest();</div><div>     1.2、IE6及其之前的版本中，XHR对象是通过MSXML库中的一个ActiveX对象实现的。</div><div>           var xhr = new ActiveXObject(’Microsoft.XMLHTTP’);</div><div><br/></div><div>2、连接和发送</div><div>     2.1、open() 函数的三个参数：请求方式、请求地址、是否异步请求(同步请求的情况极少，至今还没用到过)；异步 true</div><div>          xhr.open('get','localhost/ajax/checkUserInfo',true);</div><div><br/></div><div>      2.2、GET 请求方式是通过URL参数将数据提交到服务器的，POST则是通过将数据作为 send 的参数提交到服务器；(参数传递稍后讲解)</div><div><br/></div><div>      2.3  xhr.send()   发送请求</div><div><br/></div><div>3、监听服务器是否返回数据</div><div>     3.1、使用onreadystatechange事件监听服务器返回状态</div><div>          <span style="color: rgb(227, 0, 0);">xhr.onreadystatechange = function(){</span></div><div><span style="color: rgb(227, 0, 0);"><br/></span></div><div><span style="color: rgb(227, 0, 0);">          }</span></div><div><br/></div><div>     3.2、xhr对象的readyState属性表示请求/响应过程的当前活动阶段，这个属性的值如下</div><div>           0-未初始化，尚未调用open()方法；</div><div>           1-启动，调用了open()方法，未调用send()方法；</div><div>           2-发送，已经调用了send()方法，未接收到响应；</div><div>           3-接收，已经接收到部分响应数据；</div><div>           <span style="color: rgb(227, 0, 0);">4-完成，已经接收到全部响应数据； （我们都是使用  xhr.readyState == 4 判断ajax请求是否结束）</span></div><div><br/></div><div>     3.3、接收到响应后，响应的数据会自动填充xhr对象，相关属性如下</div><div>          <span style="color: rgb(227, 0, 0);">responseText：响应返回的主体内容，为字符串类型；(用于得到服务器返回的结果)</span></div><div>          <span style="color: rgb(227, 0, 0);">status：响应的HTTP状态码；  </span></div><div><span style="color: rgb(227, 0, 0);">               200：成功 （以2开头）     </span></div><div><span style="color: rgb(227, 0, 0);">               304：表示从缓存中获取  </span></div><div><span style="color: rgb(227, 0, 0);">               404:：请求失败  （常用于判断ajax请求是否成功）</span></div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><span style="font-size: 16px;"><b>ajax请求方式（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、get</div><div>      GET 请求方式是通过URL参数将数据提交到服务器的</div><div>      url=' http://192.168.1.120/login/index.php/Home/Index/checkUserInfo ?username=123456&amp;password=123456'</div><div>      ？表示后面的数据是向服务器传递的参数， <span style="color: rgb(227, 0, 0);">每个参数使用&amp;分割</span> ，参数的格式为 </div><div>          参数名=参数值</div><div><br/></div><div>2、post</div><div>     如果是post请求，必须使用 setRequestHeader() 来添加 HTTP 头。然后在 send() 方法中设置发送的数据：</div><div>          xhr.open(&quot;POST&quot;,&quot;ajax_test.php&quot;,true);</div><div>          <span style="color: rgb(173, 0, 0);">xhr.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);</span></div><div>          <b><span style="color: rgb(227, 0, 0);">xhr.send('username=123456&amp;password=123456');</span></b></div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><b>实战</b></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、使用ajax请求天气</div><div><br/></div><div>2、使用ajax进行注册用户名是否存在验证</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>js解析json数据（重）</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>使用JSON对象</div><div><br/></div><div>JSON.parse(jsonStr) 将json字符串转化为json对象</div><div><br/></div><div>JSON.stringify(json); 将json数据转化为json字符串</div></div><div><br/></div><div><br/></div><div><span style="color: rgb(173, 0, 0);"><span style="font-size: 16px;"><b>登录注册是如何实现的？</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、注册时  验证用户名是否存在 使用ajax验证</div><div><br/></div><div>2、登录注册  有的网站使用ajax提交数据，有的网站使用form进行提交</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="color: rgb(173, 0, 0);"><b>局部数据刷新</b></span></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>用户的增删查</div><div><br/></div><div>局部刷新的原理：</div><div>     使用ajax调用后端接口获取数据并替换</div></div><div><br/></div><div><br/></div><div><b><span style="font-size: 16px;">实战</span></b></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>1、加载更多</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><b>预习</b></span></div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>0、Promise</div><div><br/></div><div>1、什么是同源策略？</div><div><br/></div><div>2、什么是跨域？</div><div><br/></div><div>3、怎么解决跨域（jsonp）？</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 